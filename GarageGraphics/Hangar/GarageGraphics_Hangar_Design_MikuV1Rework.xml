<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<AutomationSequence documentVersion="1.0">
  <Macros>
    <Macro Name="custom_url" Value="https://m.vk.com/talliepo"/>
  </Macros>
  <TaskDefinitions>
    <!-- import tasks -->
    <Task ID="import_macro_create_tasks" Command="import_task" RepoUrlPath="Task_templates/create_workDirs_macros.xml"/>

    <!-- Get the MediaFire folder that contains the package we want to download. Note we can set the length and startIndex to -1 and 0 respectivly to effectivly get the entire string -->
    <Task ID="get_url_to_dl_site" Command="macro_substring_html" MacroName="yandisk_url" Length="-1" StartIndex="0" Url="{custom_url}"
      HtmlPath="//div[contains(@class, 'wall_item')]/div[contains(@class, 'wi_body')]/div/a[contains(@href, 'yandex')]"/>

    <!-- download the source package -->
    <Task ID="download_mod_source" Command="download_browser" Url="{yandisk_url}" HtmlPath="{yadisk_xpath}" DestinationPath="{working_folder_source}\{packageName}.zip"
      BrowserEngine="WebBrowser" WaitTimeMs="500" WaitCounts="6" BrowserHeight="0" BrowserWidth="0"/>

    <!-- import task download and extract modpack single file -->
    <Task ID="import_task_single_file_download_extract_modpack" Command="import_task" RepoUrlPath="Task_templates/Generic/single_file_download_extract_modpack.xml"/>

    <!-- import task compare single file -->
    <Task ID="import_task_single_file_compare_file" Command="import_task" RepoUrlPath="Task_templates/Generic/single_file_compare_file.xml"/>

    <!-- import task copy single file to source given specific path from macro {folder_path} -->
    <Task ID="import_task_single_file_copy_source" Command="import_task" RepoUrlPath="Task_templates/Generic/single_file_copy_source.xml"/>

    <!-- create new package zip and upload to the server -->
    <Task ID="create_upload_zip_filename_macro" Command="macro_create" MacroName="upload_zip_filename" MacroValue="{packageName}_{mod_version_from_wgmods}_{clientVersion}_{date}"/>
    <Task ID="import_create_upload_zip" Command="import_task" RepoUrlPath="Task_templates/create_upload_zip.xml"/>
  </TaskDefinitions>
</AutomationSequence>